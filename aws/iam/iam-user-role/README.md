# To create IAM User Role Policy
```
module "devops" {
  source                        = "github.com/cloudveto/terraform-modules/aws/iam/iam-user-role"
  account_id                    = "123456789"
  assumned_role_policy_template = "assume_role"
  name                          = "cloudveto_iam_role_devops_engineer"
  policy_template_file          = "devops_engineer_custom_policy"
}
module "devops_readonly_attach_policy" {
  source     = "github.com/cloudveto/terraform-modules/aws/iam/iam-attach-policy"
  policy_arn = "arn:aws:iam::aws:policy/ReadOnlyAccess"
  role       = module.devops.role_name
}
```

Sample template(assume_role.json.tpl) file. File to be placed in "templates/" folder.
```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "ec2.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
```

Sample template(devops_engineer_custom_policy.json.tpl) file. File to be placed in "templates/" folder.
```
{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Effect":"Allow",
         "Action":[
            "iam:*",
            "organizations:*",
            "account:*",
            "aws-portal:*",
            "cur:*",
            "pricing:*",
            "purchase-orders:*",
            "budgets:*",
            "ce:*",
            "awsbillingconsole:*",
            "access-analyzer:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"AssumeRole",
         "Action":[
            "sts:AssumeRole",
            "sts:GetCallerIdentity"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"lambda",
         "Action":[
            "lambda:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"APIGateway",
         "Action":[
            "apigateway:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"ExecuteAPI",
         "Action":[
            "execute-api:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"ElastiCache",
         "Action":[
            "elasticache:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"dynamodb",
         "Action":[
            "dynamodb:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"glue",
         "Action":[
            "glue:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"Compute",
         "Action":[
            "ec2:*",
            "compute-optimizer:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"EKS",
         "Action":[
            "eks:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"Cloudwatch",
         "Action":[
            "cloudwatch:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"autoscaling",
         "Action":[
            "autoscaling:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"logs",
         "Action":[
            "logs:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"RDS",
         "Action":[
            "RDS:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"Support",
         "Action":[
            "Support:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"s3",
         "Action":[
            "s3:*"
         ],
         "Effect":"Allow",
         "Resource":"arn:aws:s3:::*"
      },
      {
         "Sid":"ELB",
         "Action":[
            "elasticloadbalancing:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"NetworkManager",
         "Action":[
            "networkmanager:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"CF",
         "Effect":"Allow",
         "Action":[
            "cloudfront:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"R53",
         "Effect":"Allow",
         "Action":[
            "route53:*",
            "route53resolver:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"ACM",
         "Effect":"Allow",
         "Action":[
            "acm:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"SES",
         "Effect":"Allow",
         "Action":[
            "ses:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"SQS",
         "Effect":"Allow",
         "Action":[
            "sqs:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"ECS",
         "Effect":"Allow",
         "Action":[
            "ecs:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"ECR",
         "Effect":"Allow",
         "Action":[
            "ecr:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"cloudformation",
         "Effect":"Allow",
         "Action":[
            "cloudformation:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"elasticsearch",
         "Effect":"Allow",
         "Action":[
            "es:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"SNS",
         "Effect":"Allow",
         "Action":[
            "sns:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"servicediscovery",
         "Effect":"Allow",
         "Action":[
            "servicediscovery:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"appASG",
         "Effect":"Allow",
         "Action":[
            "application-autoscaling:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"AMPLIFY",
         "Effect":"Allow",
         "Action":[
            "amplify:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"Guardduty",
         "Effect":"Allow",
         "Action":[
            "guardduty:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"Inspector",
         "Effect":"Allow",
         "Action":[
            "inspector:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"SSM",
         "Effect":"Allow",
         "Action":[
            "ssm:*",
            "ssmmessages:*",
            "ec2messages:*",
            "ds:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"MobileTargeting",
         "Action":[
            "mobiletargeting:*"
         ],
         "Effect":"Allow",
         "Resource":"*"
      },
      {
         "Sid":"codedeploy",
         "Effect":"Allow",
         "Action":[
            "codedeploy:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"codebuild",
         "Effect":"Allow",
         "Action":[
            "codebuild:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"cloudtrail",
         "Effect":"Allow",
         "Action":[
            "cloudtrail:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"events",
         "Effect":"Allow",
         "Action":[
            "events:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"codepipeline",
         "Effect":"Allow",
         "Action":[
            "codepipeline:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"StepFunction",
         "Effect":"Allow",
         "Action":[
            "states:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"serverlessrepo",
         "Effect":"Allow",
         "Action":[
            "serverlessrepo:*"
         ],
         "Resource":"*"
      },
      {
         "Sid":"Cognito",
         "Effect":"Allow",
         "Action":[
            "cognito-idp:*",
            "cognito-identity:*",
            "cognito-sync:*"
         ],
         "Resource":"*"
      }
   ]
}
```
